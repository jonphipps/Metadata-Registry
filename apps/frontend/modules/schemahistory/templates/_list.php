<?php
// auto-generated by sfPropelAdmin
// date: 2008/03/21 16:39:08
?>
<table cellspacing="0" class="sf_admin_list">
<thead>
<tr>
<?php include_partial('list_th_tabular') ?>
</tr>
</thead>
<tfoot>
<tr><th colspan="7">
<div class="float-right">
<?php if ($pager->haveToPaginate()): ?>
  <?php $filterParam = ''; ?>
    <?php if ($sf_params->has('schema_id')): ?>
        <?php $filterParam .= '&schema_id=' . $sf_params->get('schema_id'); ?>
    <?php endif; ?>
    <?php if ($sf_params->has('import_id')): ?>
        <?php $filterParam .= '&import_id=' . $sf_params->get('import_id'); ?>
    <?php endif; ?>
<?php if ($sf_params->has('schema_property_id')): ?>
    <?php $filterParam .= '&schema_property_id=' . $sf_params->get('schema_property_id'); ?>
<?php endif; ?>
<?php if ($sf_params->has('schema_property_element_id')): ?>
    <?php $filterParam .= '&schema_property_element_id=' . $sf_params->get('schema_property_element_id'); ?>
<?php endif; ?>
  <?php echo link_to(image_tag(sfConfig::get('sf_admin_web_dir').'/images/first.png', array('align' => 'absmiddle', 'alt' => __('First'), 'title' => __('First'))), 'schemahistory/list?page=1' . $filterParam) ?>
  <?php echo link_to(image_tag(sfConfig::get('sf_admin_web_dir').'/images/previous.png', array('align' => 'absmiddle', 'alt' => __('Previous'), 'title' => __('Previous'))), 'schemahistory/list?page='.$pager->getPreviousPage() . $filterParam) ?>

  <?php foreach ($pager->getLinks() as $page): ?>
    <?php echo link_to_unless($page == $pager->getPage(), $page, 'schemahistory/list?page='.$page . $filterParam) ?>
  <?php endforeach; ?>

  <?php echo link_to(image_tag(sfConfig::get('sf_admin_web_dir').'/images/next.png', array('align' => 'absmiddle', 'alt' => __('Next'), 'title' => __('Next'))), 'schemahistory/list?page='.$pager->getNextPage() . $filterParam) ?>
  <?php echo link_to(image_tag(sfConfig::get('sf_admin_web_dir').'/images/last.png', array('align' => 'absmiddle', 'alt' => __('Last'), 'title' => __('Last'))), 'schemahistory/list?page='.$pager->getLastPage() . $filterParam) ?>
<?php endif; ?>
</div>
<?php echo format_number_choice('[0] no result|[1] 1 result|(1,+Inf] %1% results', array('%1%' => $pager->getNbResults()), $pager->getNbResults()) ?>
</th></tr>
</tfoot>
<tbody>
<?php $i = 1; $tsLast = 1925009940; $versions = $sf_flash->get('versions'); ?>
<?php foreach ($pager->getResults() as $schema_property_element_history): $odd = fmod(++$i, 2) ?>
<?php $tsNew = strtotime($schema_property_element_history->getCreatedAt()); ?>
<?php foreach ($versions as $version):
  $ts = strtotime($version->getTimeslice());?>
<?php if ($ts < $tsLast && $ts >= $tsNew): ?>
<tr>
  <td><strong>Version:</strong></td>
  <td colspan="6"><?php echo $version->getName(); ?></td>
  <td><?php $value = get_partial(
        'ts',
        array(
          'type' => 'list',
          'schema_property_element_history' => $schema_property_element_history,
          'version' => $version));
          echo ($value) ? $value : '&nbsp;' ?>
</td></tr>
<?php endif; ?>
<?php endforeach; $tsLast = $tsNew ?>
<tr class="sf_admin_row_<?php echo $odd ?>">
<?php include_partial('list_td_tabular', array('schema_property_element_history' => $schema_property_element_history)) ?>
<?php include_partial('list_td_actions', array('schema_property_element_history' => $schema_property_element_history)) ?>
</tr>
<?php endforeach; ?>
</tbody>
</table>
